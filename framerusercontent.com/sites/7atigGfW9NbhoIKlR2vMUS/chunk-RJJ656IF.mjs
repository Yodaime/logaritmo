import{B as Q,H as t,K as ee,Y as te,d as C,m as J,y as q}from"./chunk-OPMW7ZBE.mjs";import{B as n,C as j,o as w,y as v}from"./chunk-STHV6ZNI.mjs";import{c as Z}from"./chunk-RIUMFBNJ.mjs";var Re=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Be=/^https?:\/\/([^\/]+)[^\?]+\??(.+)$/,oe=e=>Re.test(String(e).toLowerCase()),Le=e=>{var i;let[,c,S]=(i=e.replace("&amp;","&").match(Be))!==null&&i!==void 0?i:[null,null,null];return[c,S?new URLSearchParams(S):null]};function Ie(e){console.log(e);try{return new URL(e),e}catch{try{return new URL(`https://${e}`),`https://${e}`}catch{}}}function We(e){return e===void 0?!1:!!(e.startsWith("#")||e.startsWith("/")||e.startsWith("."))}var ae="v1",le=te(function({service:i,redirectAs:c,mailchimpURL:S,loopsID:ne,loopsUserGroup:T,loopsMailingList:O,formsparkID:_,getwaitlistAPI:de,convertkitAPI:E,convertkitFormID:U,input:u,button:o,font:se,layout:pe,link:k,gap:ce,style:ue,onSubmit:r}){let[h,A]=v(""),[he,f]=v(!1),[$,d]=v(!1),[fe,R]=v(!1),{paddingPerSide:z,paddingTop:M,paddingRight:B,paddingBottom:me,paddingLeft:ye,padding:y,borderRadius:b,borderObject:G,focusObject:D,shadowObject:P,height:K,fixedHeight:H}=u,{buttonPaddingPerSide:ge,buttonPaddingTop:we,buttonPaddingRight:Ce,buttonPaddingBottom:Se,buttonPaddingLeft:be,buttonPadding:V}=o,xe=z?`${M}px ${o.isDocked?B+o.widthWhenDocked:B}px ${me}px ${ye}px`:`${y}px ${o.isDocked?y+o.widthWhenDocked:y}px ${y}px ${y}px`,ve=ge?`${o.isDocked?0:we}px ${Ce}px ${o.isDocked?0:Se}px ${be}px`:`${o.isDocked?0:V}px ${V}px ${o.isDocked?0:V}px ${V}px`,X=q(),x=()=>{if(d(!1),R(!1),A(""),c==="link"&&k&&!he){let[l,s]=k.split("#"),{routeId:a,pathVariables:p}=Q(X.routes,l);if(a&&X.navigate(a,s,p),!We(k)){let F=Ie(k);F&&Z.open(F,"_blank")}}},g=w(l=>l===""||!oe(l)?(f(!0),m.start("error"),!1):!0,[oe]),ke=w(l=>{f(!1),A(l.target.value)},[]),$e=w(l=>{R(!0)},[]),De=w(l=>{R(!1),f(!1)},[]),Pe=w(l=>{if(l.preventDefault(),!$){if(d(!0),i==="mailchimp"){let[s,a]=Le(S);if(!g(h)||!s||!a){d(!1);return}a.set("MERGE0",h),fetch(`https://${s}/subscribe/post`,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:a.toString()}).then(p=>{x(),c==="overlay"&&r?.()}).catch(p=>{console.error(p),d(!1),f(!0),m.start("error")})}if(i==="loops"){if(!g(h)){d(!1);return}let s=`email=${encodeURIComponent(h)}`,a=`userGroup=${encodeURIComponent(T)}`,p=`mailingLists=${encodeURIComponent(O)}`,F=!!O&&O!==" ",Te=!!T&&T!==" ",W=s;Te&&(W+=`&${a}`),F&&(W+=`&${p}`),fetch(`https://app.loops.so/api/newsletter-form/${ne}`,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:W}).then(()=>{x(),c==="overlay"&&r?.()}).catch(Oe=>{console.error(Oe),d(!1),f(!0),m.start("error")})}if(i==="formspark"){if(!g(h)){d(!1);return}let s=new FormData(l.target),a=Object.fromEntries(s.entries());fetch(`https://api.formspark.io/${_}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)}).then(()=>{x(),r?.()}).catch(p=>{console.error(p),d(!1),f(!0),m.start("error")})}if(i==="getwaitlist"){if(!g(h)){d(!1);return}let s=new FormData(l.target),a=Object.fromEntries(s.entries());a.referral_link=document.URL,fetch(`https://api.getwaitlist.com/api/v1
/waiter/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)}).then(()=>{x(),c==="overlay"&&r?.()}).catch(p=>{console.error(p),d(!1),f(!0),m.start("error")})}if(i==="convertkit"){if(!g(h)){d(!1);return}let s=new FormData(l.target),a=Object.fromEntries(s.entries());a.referral_link=document.URL,a.api_key=E,fetch(`https://api.convertkit.com/v3/forms/${U}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)}).then(()=>{x(),c==="overlay"&&r?.()}).catch(p=>{console.error(p),d(!1),f(!0),m.start("error")})}}},[S,_,U,h,r,g,$]),m=J(),Y=u.focusObject?`inset 0 0 0 ${D.focusWidthFrom}px ${D.focusColor}`:null,Ve=u.focusObject?`inset 0 0 0 ${D.focusWidthTo}px ${D.focusColor}`:null,L=u.shadowObject?`${P.shadowX}px ${P.shadowY}px ${P.shadowBlur}px ${P.shadowColor}`:null,I=u.borderObject?`inset 0 0 0 ${G.borderWidth}px ${G.borderColor}`:null,Fe={default:{x:0},error:{x:[0,-4,4,0],transition:{duration:.2}}},je={default:{boxShadow:N(Y,L,I)},focused:{boxShadow:N(Ve,L,I)}};return n(C.div,{style:{...ue,...Ne,"--framer-custom-placeholder-color":u.placeholderColor},variants:Fe,animate:m,children:j("form",{style:{width:"100%",height:"auto",display:"flex",position:"relative",flexDirection:pe==="vertical"?"column":"row",color:o.color,gap:o.isDocked?0:ce},onSubmit:Pe,method:"POST",children:[i==="getwaitlist"&&n("input",{type:"hidden",name:"api_key",value:de}),i==="convertkit"&&n("input",{type:"hidden",name:"api_key",value:E}),n(C.input,{type:"email",name:"email",placeholder:u.placeholder,value:h,className:`${ae} framer-custom-input`,onChange:ke,onFocus:$e,onBlur:De,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false",style:{...re,padding:xe,borderRadius:b,fontSize:16,...se,background:u.fill,height:K?"auto":H,color:u.color,boxShadow:N(Y,L,I)},variants:je,initial:!1,animate:fe?"focused":"default",transition:{duration:.3},"data-1p-ignore":!0}),!o.shouldAppear&&$&&n(ie,{shouldAppear:o.shouldAppear,paddingPerSide:z,paddingTop:M,paddingRight:B,padding:y,color:u.color}),o.shouldAppear&&j("div",{style:{position:o.isDocked?"absolute":"relative",top:o.isDocked?o.insetWhenDocked:0,right:o.isDocked?o.insetWhenDocked:0,bottom:o.isDocked?o.insetWhenDocked:0},children:[n(C.input,{type:"submit",value:o.label,style:{...re,width:o.isDocked?o.widthWhenDocked:"100%",height:K?"100%":H,cursor:"pointer",padding:ve,borderRadius:o.isDocked?b-o.insetWhenDocked:b,fontSize:16,...o.buttonFont,background:o.fill,color:o.color,zIndex:1,boxShadow:_e(o)}}),$&&n("div",{style:{borderRadius:o.isDocked?b-o.insetWhenDocked:b,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",inset:0,zIndex:2,color:o.color,background:o.fill},children:n(ie,{color:o.color})})]})]})})},[`.${ae}.framer-custom-input::placeholder { color: var(--framer-custom-placeholder-color) !important; }`]),ie=e=>{let i=e.shouldAppear?{}:{position:"absolute",top:"calc(50% - 8px)",right:e.paddingPerSide?e.paddingRight:e.padding};return n(C.div,{style:{height:16,width:16,...i},initial:{rotate:0},animate:{rotate:360},transition:{duration:1,repeat:1/0},children:n(C.div,{initial:{scale:0},animate:{scale:1},children:j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",style:{fill:"currentColor",color:e.color},children:[n("path",{d:"M 8 0 C 3.582 0 0 3.582 0 8 C 0 12.419 3.582 16 8 16 C 12.418 16 16 12.419 16 8 C 15.999 3.582 12.418 0 8 0 Z M 8 14 C 4.687 14 2 11.314 2 8 C 2 4.687 4.687 2 8 2 C 11.314 2 14 4.687 14 8 C 14 11.314 11.314 14 8 14 Z",fill:"currentColor",opacity:"0.2"}),n("path",{d:"M 8 0 C 12.418 0 15.999 3.582 16 8 C 16 8 16 9 15 9 C 14 9 14 8 14 8 C 14 4.687 11.314 2 8 2 C 4.687 2 2 4.687 2 8 C 2 8 2 9 1 9 C 0 9 0 8 0 8 C 0 3.582 3.582 0 8 0 Z",fill:"currentColor"})]})})})};ee(le,{service:{title:"Service",type:t.Enum,options:["loops","formspark","mailchimp","getwaitlist","convertkit"],optionTitles:["Loops","FormSpark","MailChimp","Get Waitlist","ConvertKit"],defaultValue:"loops"},mailchimpURL:{title:"URL",placeholder:"https://***.us6.list-manage.com/subscribe/post?u=***",type:t.String,hidden:e=>e.service!=="mailchimp"},loopsID:{title:"ID",placeholder:"klm2jxy0i98abzr01pq7defg5",type:t.String,hidden:e=>e.service!=="loops"},loopsUserGroup:{title:"User Group",type:t.String,placeholder:"Title",optional:!0,hidden:e=>e.service!=="loops"},loopsMailingList:{title:"Mailing List",type:t.String,placeholder:"cm3q41c5v02ii1lml14om2wtr",optional:!0,hidden:e=>e.service!=="loops"},formsparkID:{title:"ID",placeholder:"7PbPpGN3",type:t.String,hidden:e=>e.service!=="formspark"},getwaitlistAPI:{title:"ID",placeholder:"9148",type:t.String,hidden:e=>e.service!=="getwaitlist"},convertkitAPI:{title:"API Key",placeholder:"5opis1WK6xnVsBwrOINUpe",type:t.String,hidden:e=>e.service!=="convertkit"},convertkitFormID:{title:"Form ID",placeholder:"1043389",type:t.String,hidden:e=>e.service!=="convertkit"},redirectAs:{title:"Success",type:t.Enum,options:["link","overlay"],optionTitles:["Open Link","Show Overlay"],defaultValue:"link"},link:{title:"Redirect",type:t.Link,hidden:e=>e.redirectAs==="overlay"},onSubmit:{title:"Submit",type:t.EventHandler,hidden:e=>e.redirectAs==="link"},layout:{title:"Layout",type:t.Enum,options:["horizontal","vertical"],displaySegmentedControl:!0,hidden:e=>e.button.isDocked},font:{type:t.Font,title:"Font",controls:"extended"},input:{title:"Input",type:t.Object,controls:{placeholder:{title:"Placeholder",type:t.String,defaultValue:"name@email.com"},placeholderColor:{title:" ",type:t.Color,defaultValue:"rgba(0, 0, 0, 0.3)"},fill:{title:"Fill",type:t.Color,defaultValue:"#EBEBEB"},color:{title:"Text",type:t.Color,defaultValue:"#000"},height:{title:"Height",type:t.Boolean,enabledTitle:"Auto",disabledTitle:"Fixed"},fixedHeight:{title:" ",type:t.Number,displayStepper:!0,min:0,defaultValue:50,hidden:e=>e.height},padding:{title:"Padding",type:t.FusedNumber,toggleKey:"paddingPerSide",toggleTitles:["Padding","Padding per side"],defaultValue:15,valueKeys:["paddingTop","paddingRight","paddingBottom","paddingLeft"],valueLabels:["T","R","B","L"],min:0},borderRadius:{title:"Radius",type:t.Number,displayStepper:!0,min:0,defaultValue:8},focusObject:{type:t.Object,title:"Focus",optional:!0,controls:{focusWidthFrom:{title:"From",type:t.Number,displayStepper:!0,defaultValue:0},focusWidthTo:{title:"To",type:t.Number,displayStepper:!0,defaultValue:2},focusColor:{title:"Color",type:t.Color,defaultValue:"#09F"}}},borderObject:{type:t.Object,title:"Border",optional:!0,controls:{borderWidth:{title:"Width",type:t.Number,displayStepper:!0,defaultValue:1},borderColor:{title:"Color",type:t.Color,defaultValue:"rgba(200,200,200,0.5)"}}},shadowObject:{type:t.Object,title:"Shadow",optional:!0,controls:{shadowColor:{title:"Color",type:t.Color,defaultValue:"rgba(0,0,0,0.25)"},shadowX:{title:"Shadow X",type:t.Number,min:-100,max:100,defaultValue:0},shadowY:{title:"Shadow Y",type:t.Number,min:-100,max:100,defaultValue:2},shadowBlur:{title:"Shadow B",type:t.Number,min:0,max:100,defaultValue:4}}}}},button:{title:"Button",type:t.Object,controls:{shouldAppear:{title:"Show",type:t.Boolean,defaultValue:!0},label:{title:"Label",type:t.String,defaultValue:"Subscribe"},buttonFont:{type:t.Font,title:"Font",controls:"extended"},fill:{title:"Fill",type:t.Color,defaultValue:"#333"},color:{title:"Text",type:t.Color,defaultValue:"#FFF"},isDocked:{title:"Docked",type:t.Boolean,defaultValue:!1},widthWhenDocked:{title:"Width",type:t.Number,min:0,defaultValue:100,displayStepper:!0,hidden:e=>!e.isDocked},insetWhenDocked:{title:"Inset",type:t.Number,min:0,defaultValue:5,displayStepper:!0,hidden:e=>!e.isDocked},buttonPadding:{title:"Padding",type:t.FusedNumber,toggleKey:"buttonPaddingPerSide",toggleTitles:["Padding","Padding per side"],defaultValue:15,valueKeys:["buttonPaddingTop","buttonPaddingRight","buttonPaddingBottom","buttonPaddingLeft"],valueLabels:["T","R","B","L"],min:0},buttonShadow:{type:t.Object,title:"Shadow",optional:!0,controls:{shadowColor:{title:"Color",type:t.Color,defaultValue:"rgba(0,0,0,0.25)"},shadowX:{title:"Shadow X",type:t.Number,min:-100,max:100,defaultValue:0},shadowY:{title:"Shadow Y",type:t.Number,min:-100,max:100,defaultValue:2},shadowBlur:{title:"Shadow B",type:t.Number,min:0,max:100,defaultValue:4}}}}},gap:{title:"Gap",type:t.Number,displayStepper:!0,min:0,defaultValue:10,hidden:e=>e.button.isDocked}});var re={WebkitAppearance:"none",appearance:"none",width:"100%",height:"auto",outline:"none",border:"none"},Ne={position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"};function _e(e){return e.buttonShadow?`${e.buttonShadow.shadowX}px ${e.buttonShadow.shadowY}px ${e.buttonShadow.shadowBlur}px ${e.buttonShadow.shadowColor}`:"none"}function N(...e){let i=[];return e.forEach(c=>c&&i.push(c)),i.join(", ")}var Ke=le;export{Ke as a};
//# sourceMappingURL=chunk-RJJ656IF.mjs.map
